(()=>{"use strict";var e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button-submit",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},t=document.querySelector(".profile__button-edit-info"),n=document.querySelector(".profile__button-add-picture"),r=document.querySelector(".popup__form_type_edit-profile"),o=document.querySelector(".popup__form_type_add-card"),i=document.querySelector(".popup__input_type_name"),a=document.querySelector(".popup__input_type_description"),u=document.querySelector(".popup__form_type_set-avatar"),c=document.querySelector(".profile__overlay-avatar");function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n,r,o){var i=t.link,a=t.name,u=t.likes,c=t.owner,s=t._id,l=o.handleCardClick,p=o.handleTrashClick,f=o.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._image=i,this._title=a,this._likesArray=u,this._likesAmount=u.length,this._cardOwnerId=c._id,this._cardId=s,this._cardSelector=n,this._openPopupZoomPhoto=l,this._openPopupWithConfirmation=p,this._handleLikeClick=f,this._userId=r}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".cards__grid-item").cloneNode(!0)}},{key:"generateElement",value:function(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".cards__like-btn"),this._cardImage=this._element.querySelector(".cards__photo"),this._cardTitle=this._element.querySelector(".cards__title"),this._cardRemover=this._element.querySelector(".cards__trash"),this._likeNumber=this._element.querySelector(".cards__like-number"),this._setEventListeners(),this._isCardLiked()?this.likeCard():this.dislikeCard(),this._cardImage.src=this._image,this._cardImage.alt="Фотография: '".concat(this._title,"'"),this._cardTitle.textContent=this._title,this._likeNumber.textContent=this._likesAmount,this._element}},{key:"_checkCardOwner",value:function(){return this._cardOwnerId===this._userId||(this._deleteCardRemover(),!1)}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._handleLikeClick(e._likeNumber,e._cardId)})),this._checkCardOwner()&&this._cardRemover.addEventListener("click",(function(){e._openPopupWithConfirmation(e._element,e._cardId)})),this._cardImage.addEventListener("click",(function(){e._openPopupZoomPhoto(e._image,e._title)}))}},{key:"_isCardLiked",value:function(){var e=this;return this._likesArray.some((function(t){return t._id===e._userId}))}},{key:"dislikeCard",value:function(){this._likeButton.classList.remove("cards__like-btn_active")}},{key:"likeCard",value:function(){this._likeButton.classList.add("cards__like-btn_active")}},{key:"hasButtonAdditionalClass",value:function(){return this._likeButton.classList.contains("cards__like-btn_active")}},{key:"_deleteCardRemover",value:function(){this._cardRemover.remove(),this._cardRemover=null}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._setEventListener()}},{key:"_setEventListener",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonSubmit()}))}))}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonSubmit(this._inputList,this._submitButton),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_toggleButtonSubmit",value:function(){this._hasInvalidInput()?(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass)):(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItem",value:function(e){var t=this;e.forEach((function(e){t._renderedElement=t._renderer(e),t._container.append(t._renderedElement)}))}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_active"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_active"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup_active")||t.target.classList.contains("popup__button-close"))&&e.close()}))}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=k(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function S(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__photo"),t._popupTitle=t._popup.querySelector(".popup__title-zoom"),t}return t=a,(n=[{key:"open",value:function(e,t){b(g(a.prototype),"open",this).call(this),this._popupImage.src=e,this._popupImage.alt="Фотография: '".concat(t,"'"),this._popupTitle.textContent=t}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(y);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=P(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},j.apply(this,arguments)}function P(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}function L(e,t){return L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},L(e,t)}function I(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(r);if(o){var n=B(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function a(e,t){var n,r,o,u,c=t.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),u=function(e){e.preventDefault(),n._handleFormSubmit(n._getInputValues(),n._popupButtonSubmit)},(o="_handleSubmit")in(r=R(n=i.call(this,e)))?Object.defineProperty(r,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[o]=u,n._inputList=n._popup.querySelectorAll(".popup__input"),n._handleFormSubmit=c,n._popupForm=n._popup.querySelector(".popup__form"),n._popupButtonSubmit=n._popup.querySelector(".popup__button-submit"),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"close",value:function(){j(B(a.prototype),"close",this).call(this),this._popupForm.reset()}},{key:"setEventListeners",value:function(){j(B(a.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",this._handleSubmit)}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(y);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t){var n=t.userName,r=t.userDescription,o=t.userAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(n),this._profileDescription=document.querySelector(r),this._profileAvatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._profileName.textContent=t,this._profileDescription.textContent=n}},{key:"setUserAvatar",value:function(e){var t=e.avatar;this._profileAvatar.src=t}},{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,about:this._profileDescription.textContent}}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileUrl=n,this._headers=r,this._cardsUrl="https://mesto.nomoreparties.co/v1/cohort36/cards"}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e=this;return fetch(this._profileUrl,{headers:this._headers}).then((function(t){return e._checkResponseStatus(t)}))}},{key:"_checkResponseStatus",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch(this._cardsUrl,{headers:this._headers}).then((function(t){return e._checkResponseStatus(t)}))}},{key:"setUserInfo",value:function(e){var t=this;return fetch(this._profileUrl,{headers:this._headers,method:"PATCH",body:JSON.stringify(e)}).then((function(e){return t._checkResponseStatus(e)}))}},{key:"addNewCard",value:function(e){var t=this;return fetch("https://mesto.nomoreparties.co/v1/cohort36/cards",{headers:this._headers,method:"POST",body:JSON.stringify(e)}).then((function(e){return t._checkResponseStatus(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("https://mesto.nomoreparties.co/v1/cohort36/cards/".concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return t._checkResponseStatus(e)}))}},{key:"likeCard",value:function(e,t){var n=this;return fetch("https://mesto.nomoreparties.co/v1/cohort36/cards/".concat(e,"/likes"),{headers:this._headers,method:t}).then((function(e){return n._checkResponseStatus(e)}))}},{key:"setUserAvatar",value:function(e){var t=this;return fetch("https://nomoreparties.co/v1/cohort36/users/me/avatar",{headers:this._headers,method:"PATCH",body:JSON.stringify(e)}).then((function(e){return t._checkResponseStatus(e)}))}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=F(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},N.apply(this,arguments)}function F(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}function z(e,t){return z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},z(e,t)}function J(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return H(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}var W,Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(r);if(o){var n=M(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return J(this,e)});function a(e,t){var n,r,o,u,c=t.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),u=function(e){e.preventDefault(),n._handleFormSubmit(n._cardElement,n._cardId),n.close()},(o="_handleSubmit")in(r=H(n=i.call(this,e)))?Object.defineProperty(r,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[o]=u,n._handleFormSubmit=c,n}return t=a,(n=[{key:"open",value:function(e,t){N(M(a.prototype),"open",this).call(this),this._cardElement=e,this._cardId=t}},{key:"setEventListeners",value:function(){N(M(a.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",this._handleSubmit)}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(y);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=new f(e,o),K=new f(e,r),Q=new f(e,u),X=new A({userName:".profile__name",userDescription:".profile__description",userAvatar:".profile__avatar"}),Y=new x({baseUrl:"https://nomoreparties.co/v1/cohort36/users/me",headers:{authorization:"24bb909b-945c-4159-8387-3cc3e3137134","Content-Type":"application/json"}}),ee=new d({renderer:function(e){return te(e)}},".cards__grid-list");function te(e){var t=new l(e,".cards-template",W,{handleCardClick:function(e,t){ne.open(e,t)},handleTrashClick:function(e,t){ae.open(e,t)},handleLikeClick:function(e,n){t.hasButtonAdditionalClass()?Y.likeCard(n,"DELETE").then((function(n){t.dislikeCard(),e.textContent=n.likes.length})).catch((function(e){console.error(e)})):Y.likeCard(n,"PUT").then((function(n){t.likeCard(),e.textContent=n.likes.length})).catch((function(e){console.error(e)}))}});return t.generateElement()}var ne=new C(".popup_type_zoom-photo"),re=new T(".popup_type_add-card",{handleFormSubmit:function(e,t){ue(!0,t,t.textContent),Y.addNewCard(e).then((function(e){var t=te({name:e.name,link:e.link,likes:e.likes,owner:e.owner,_id:e._id});ee.addItem(t),re.close()})).catch((function(e){console.error(e)})).finally((function(){ue(!1,t,"Создать")}))}}),oe=new T(".popup_type_edit-profile",{handleFormSubmit:function(e,t){ue(!0,t,t.textContent),Y.setUserInfo(e).then((function(e){X.setUserInfo(e),oe.close()})).catch((function(e){console.error(e)})).finally((function(){ue(!1,t,"Сохранить")}))}}),ie=new T(".popup_type_set-avatar",{handleFormSubmit:function(e,t){ue(!0,t,t.textContent),Y.setUserAvatar(e).then((function(e){X.setUserAvatar(e),ie.close()})).catch((function(e){console.error(e)})).finally((function(){ue(!1,t,"Сохранить")}))}}),ae=new Z(".popup_type_confirm",{handleFormSubmit:function(e,t){Y.deleteCard(t).then((function(){e.remove(),e=null})).catch((function(e){console.error(e)}))}});function ue(e,t,n){t.textContent=e?"Сохранение...":n}Promise.all([Y.getUserInfo(),Y.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];W=o._id,X.setUserInfo(o),X.setUserAvatar(o),ee.renderItem(i)})).catch((function(e){console.error(e)})),t.addEventListener("click",(function(){var e=X.getUserInfo(),t=e.name,n=e.about;i.value=t,a.value=n,oe.open(),K.resetValidation()})),n.addEventListener("click",(function(){re.open(),G.resetValidation()})),c.addEventListener("click",(function(){ie.open(),Q.resetValidation()})),ne.setEventListeners(),re.setEventListeners(),oe.setEventListeners(),ae.setEventListeners(),ie.setEventListeners(),G.enableValidation(),K.enableValidation(),Q.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQWFULE9BRWJWLEVBQXFCMEMscUJBR3ZCaE0sRUFBYTBDLGlCQUFpQixTQUFTLFdBQ3JDeUksR0FBZW5CLE9BRWZSLEVBQXVCd0MscUJBR3pCakMsR0FBZWtDLG9CQUNmeEIsR0FBYXdCLG9CQUNiakIsR0FBaUJpQixvQkFDakJoQyxHQUFnQmdDLG9CQUNoQmQsR0FBZWMsb0JBRWYzQyxFQUFxQjRDLG1CQUNyQjNDLEVBQXlCMkMsbUJBQ3pCMUMsRUFBdUIwQyxvQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY29uZmlnVmFsaWRhdGlvbiA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b24tc3VibWl0XCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGJ1dHRvbkVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucHJvZmlsZV9fYnV0dG9uLWVkaXQtaW5mb1wiXG4pOyAvL9C60L3QvtC/0LrQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5leHBvcnQgY29uc3QgYnV0dG9uTmV3Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2J1dHRvbi1hZGQtcGljdHVyZVwiXG4pOyAvLyDQutC90L7Qv9C60LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuZXhwb3J0IGNvbnN0IGZvcm1Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2Zvcm1fdHlwZV9lZGl0LXByb2ZpbGVcIlxuKTsgLy8g0YTQvtGA0LzQsCDQv9GA0L7RhNC40LvRj1xuZXhwb3J0IGNvbnN0IGZvcm1OZXdDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV90eXBlX2FkZC1jYXJkXCIpOyAvLyDRhNC+0YDQvNCwINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxuZXhwb3J0IGNvbnN0IGlucHV0VHlwZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX25hbWVcIik7XG5leHBvcnQgY29uc3QgaW5wdXRUeXBlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvblwiXG4pO1xuZXhwb3J0IGNvbnN0IGZvcm1TZXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fZm9ybV90eXBlX3NldC1hdmF0YXJcIlxuKTtcbmV4cG9ydCBjb25zdCBidXR0b25BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX292ZXJsYXktYXZhdGFyXCIpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHsgbGluaywgbmFtZSwgbGlrZXMsIG93bmVyLCBfaWQgfSxcbiAgICBjYXJkU2VsZWN0b3IsIHVzZXJJZCxcbiAgICB7IGhhbmRsZUNhcmRDbGljaywgaGFuZGxlVHJhc2hDbGljaywgaGFuZGxlTGlrZUNsaWNrIH1cbiAgKSB7XG4gICAgdGhpcy5faW1hZ2UgPSBsaW5rO1xuICAgIHRoaXMuX3RpdGxlID0gbmFtZTtcbiAgICB0aGlzLl9saWtlc0FycmF5ID0gbGlrZXM7XG4gICAgdGhpcy5fbGlrZXNBbW91bnQgPSBsaWtlcy5sZW5ndGg7XG4gICAgdGhpcy5fY2FyZE93bmVySWQgPSBvd25lci5faWQ7XG4gICAgdGhpcy5fY2FyZElkID0gX2lkO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9vcGVuUG9wdXBab29tUGhvdG8gPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5fb3BlblBvcHVwV2l0aENvbmZpcm1hdGlvbiA9IGhhbmRsZVRyYXNoQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2dyaWQtaXRlbVwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIGdlbmVyYXRlRWxlbWVudCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saWtlLWJ0blwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX3Bob3RvXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fdGl0bGVcIik7XG4gICAgdGhpcy5fY2FyZFJlbW92ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX3RyYXNoXCIpO1xuICAgIHRoaXMuX2xpa2VOdW1iZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpa2UtbnVtYmVyXCIpO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIGlmICh0aGlzLl9pc0NhcmRMaWtlZCgpKSB7XG4gICAgICB0aGlzLmxpa2VDYXJkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzbGlrZUNhcmQoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5faW1hZ2U7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGDQpNC+0YLQvtCz0YDQsNGE0LjRjzogJyR7dGhpcy5fdGl0bGV9J2A7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XG4gICAgdGhpcy5fbGlrZU51bWJlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzQW1vdW50O1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfY2hlY2tDYXJkT3duZXIoKSB7XG4gICAgaWYgKHRoaXMuX2NhcmRPd25lcklkICE9PSB0aGlzLl91c2VySWQpIHtcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmRSZW1vdmVyKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLl9saWtlTnVtYmVyLCB0aGlzLl9jYXJkSWQpO1xuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuX2NoZWNrQ2FyZE93bmVyKCkpIHtcbiAgICAgIHRoaXMuX2NhcmRSZW1vdmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX29wZW5Qb3B1cFdpdGhDb25maXJtYXRpb24odGhpcy5fZWxlbWVudCwgdGhpcy5fY2FyZElkKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX29wZW5Qb3B1cFpvb21QaG90byh0aGlzLl9pbWFnZSwgdGhpcy5fdGl0bGUpO1xuICAgIH0pO1xuICB9XG5cbiAgX2lzQ2FyZExpa2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9saWtlc0FycmF5LnNvbWUodXNlciA9PiB7XG4gICAgICByZXR1cm4gdXNlci5faWQgPT09IHRoaXMuX3VzZXJJZDtcbiAgICB9KTtcbiAgfVxuXG4gIGRpc2xpa2VDYXJkKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRzX19saWtlLWJ0bl9hY3RpdmVcIik7XG4gIH1cblxuICBsaWtlQ2FyZCgpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkc19fbGlrZS1idG5fYWN0aXZlXCIpO1xuICB9XG5cbiAgaGFzQnV0dG9uQWRkaXRpb25hbENsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnY2FyZHNfX2xpa2UtYnRuX2FjdGl2ZScpO1xuICB9XG5cbiAgX2RlbGV0ZUNhcmRSZW1vdmVyKCkge1xuICAgIHRoaXMuX2NhcmRSZW1vdmVyLnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRSZW1vdmVyID0gbnVsbDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXIoKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVyKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9pc1ZhbGlkKGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN1Ym1pdCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3VibWl0KHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fc3VibWl0QnV0dG9uKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBfaXNWYWxpZChpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgaW5wdXRFcnJvciA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBpbnB1dEVycm9yLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgaW5wdXRFcnJvci50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBpbnB1dEVycm9yID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGlucHV0RXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBpbnB1dEVycm9yLnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdWJtaXQoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgcmVuZGVySXRlbShjYXJkc0xpc3QpIHtcbiAgICBjYXJkc0xpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZCh0aGlzLl9yZW5kZXJlZEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9hY3RpdmVcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX2FjdGl2ZVwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9hY3RpdmVcIikgfHxcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fYnV0dG9uLWNsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGhvdG9cIik7XG4gICAgdGhpcy5fcG9wdXBUaXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3RpdGxlLXpvb21cIik7XG4gIH1cblxuICBvcGVuKGltYWdlLCBuYW1lKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gaW1hZ2U7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBg0KTQvtGC0L7Qs9GA0LDRhNC40Y86ICcke25hbWV9J2A7XG4gICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB7IGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5fcG9wdXBCdXR0b25TdWJtaXQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucG9wdXBfX2J1dHRvbi1zdWJtaXRcIlxuICAgICk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG5cbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgfVxuXG4gIF9oYW5kbGVTdWJtaXQgPSAoZXZ0KSA9PiB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCksIHRoaXMuX3BvcHVwQnV0dG9uU3VibWl0KTtcbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWUsIHVzZXJEZXNjcmlwdGlvbiwgdXNlckF2YXRhciB9KSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lKTtcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJEZXNjcmlwdGlvbik7XG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhcik7XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKHsgYXZhdGFyIH0pIHtcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyLnNyYyA9IGF2YXRhcjtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9wcm9maWxlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgICB0aGlzLl9jYXJkc1VybCA9IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydDM2L2NhcmRzXCI7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fcHJvZmlsZVVybCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlU3RhdHVzKHJlcykpO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2VTdGF0dXMocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2NhcmRzVXJsLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2VTdGF0dXMocmVzKSk7XG4gIH1cblxuICBzZXRVc2VySW5mbyh1c2VySW5mb09iaikge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9wcm9maWxlVXJsLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1c2VySW5mb09iaiksXG4gICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZVN0YXR1cyhyZXMpKTtcbiAgfVxuXG4gIGFkZE5ld0NhcmQoY2FyZERhdGFPYmopIHtcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0MzYvY2FyZHNcIiwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjYXJkRGF0YU9iaiksXG4gICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZVN0YXR1cyhyZXMpKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYGh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQzNi9jYXJkcy8ke2lkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZVN0YXR1cyhyZXMpKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGlkLCBtZXRob2QpIHtcbiAgICByZXR1cm4gZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydDM2L2NhcmRzLyR7aWR9L2xpa2VzYCxcbiAgICAgIHtcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB9XG4gICAgKVxuICAgICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlU3RhdHVzKHJlcykpO1xuICB9XG5cbiAgc2V0VXNlckF2YXRhcih1cmxPYmopIHtcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwczovL25vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0MzYvdXNlcnMvbWUvYXZhdGFyXCIsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVybE9iaiksXG4gICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZVN0YXR1cyhyZXMpKTtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIGNvbmZpZ1ZhbGlkYXRpb24sXG4gIGJ1dHRvbkVkaXRQcm9maWxlLFxuICBmb3JtU2V0QXZhdGFyLFxuICBmb3JtTmV3Q2FyZCxcbiAgYnV0dG9uTmV3Q2FyZCxcbiAgYnV0dG9uQXZhdGFyLFxuICBmb3JtUHJvZmlsZSxcbiAgaW5wdXRUeXBlRGVzY3JpcHRpb24sXG4gIGlucHV0VHlwZU5hbWUsXG59IGZyb20gXCIuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb25cIjtcblxubGV0IG93bmVySWQ7XG5jb25zdCBmb3JtTmV3Q2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZ1ZhbGlkYXRpb24sIGZvcm1OZXdDYXJkKTtcbmNvbnN0IGZvcm1Qcm9maWxlSW5mb1ZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICBjb25maWdWYWxpZGF0aW9uLFxuICBmb3JtUHJvZmlsZVxuKTtcbmNvbnN0IGZvcm1TZXRBdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgY29uZmlnVmFsaWRhdGlvbixcbiAgZm9ybVNldEF2YXRhclxuKTtcbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWU6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgdXNlckRlc2NyaXB0aW9uOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxuICB1c2VyQXZhdGFyOiBcIi5wcm9maWxlX19hdmF0YXJcIixcbn0pO1xuY29uc3QgbXlQYWdlQXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydDM2L3VzZXJzL21lXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjI0YmI5MDliLTk0NWMtNDE1OS04Mzg3LTNjYzNlMzEzNzEzNFwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICByZW5kZXJlcjogaXRlbSA9PiB7XG4gICAgcmV0dXJuIGNyZWF0ZUNhcmQoaXRlbSk7XG4gIH1cbn0sICcuY2FyZHNfX2dyaWQtbGlzdCcpXG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoaXRlbSwgXCIuY2FyZHMtdGVtcGxhdGVcIiwgb3duZXJJZCwge1xuICAgIGhhbmRsZUNhcmRDbGljazogKGltYWdlLCBuYW1lKSA9PiB7XG4gICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGltYWdlLCBuYW1lKTtcbiAgICB9LFxuICAgIGhhbmRsZVRyYXNoQ2xpY2s6IChjYXJkRWxlbWVudCwgY2FyZElkKSA9PiB7XG4gICAgICBwb3B1cERlbGV0ZUNhcmQub3BlbihjYXJkRWxlbWVudCwgY2FyZElkKTtcbiAgICB9LFxuICAgIGhhbmRsZUxpa2VDbGljazogKGNhcmRMaWtlTnVtYmVyLCBjYXJkSWQpID0+IHtcbiAgICAgIGlmIChuZXdDYXJkLmhhc0J1dHRvbkFkZGl0aW9uYWxDbGFzcygpKSB7XG4gICAgICAgICAgbXlQYWdlQXBpLmxpa2VDYXJkKGNhcmRJZCwgXCJERUxFVEVcIilcbiAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIG5ld0NhcmQuZGlzbGlrZUNhcmQoKTtcbiAgICAgICAgICAgICAgICBjYXJkTGlrZU51bWJlci50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIG15UGFnZUFwaS5saWtlQ2FyZChjYXJkSWQsIFwiUFVUXCIpXG4gICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgIG5ld0NhcmQubGlrZUNhcmQoKTtcbiAgICAgICAgICAgICAgICAgIGNhcmRMaWtlTnVtYmVyLnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sXG4gIH0pO1xuICByZXR1cm4gbmV3Q2FyZC5nZW5lcmF0ZUVsZW1lbnQoKTtcbn1cblxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV96b29tLXBob3RvXCIpO1xuXG5jb25zdCBwb3B1cE5ld0NhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIsIHtcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1WYWx1ZXMsIHBvcHVwQnV0dG9uU3VibWl0KSA9PiB7XG4gICAgcmVuZGVyTG9hZGluZyh0cnVlLCBwb3B1cEJ1dHRvblN1Ym1pdCwgcG9wdXBCdXR0b25TdWJtaXQudGV4dENvbnRlbnQpO1xuICAgIG15UGFnZUFwaVxuICAgICAgLmFkZE5ld0NhcmQoZm9ybVZhbHVlcylcbiAgICAgIC50aGVuKCh7IG5hbWUsIGxpbmssIGxpa2VzLCBvd25lciwgX2lkIH0pID0+IHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHsgbmFtZSwgbGluaywgbGlrZXMsIG93bmVyLCBfaWQgfSk7XG4gICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgICAgICBwb3B1cE5ld0NhcmQuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgcG9wdXBCdXR0b25TdWJtaXQsIFwi0KHQvtC30LTQsNGC0YxcIik7XG4gICAgICB9KTtcbiAgfSxcbn0pO1xuXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGVcIiwge1xuICBoYW5kbGVGb3JtU3VibWl0OiAoZm9ybVZhbHVlcywgcG9wdXBCdXR0b25TdWJtaXQpID0+IHtcbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIHBvcHVwQnV0dG9uU3VibWl0LCBwb3B1cEJ1dHRvblN1Ym1pdC50ZXh0Q29udGVudCk7XG4gICAgbXlQYWdlQXBpXG4gICAgICAuc2V0VXNlckluZm8oZm9ybVZhbHVlcylcbiAgICAgIC50aGVuKCh1c2VySW5mbykgPT4ge1xuICAgICAgICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyh1c2VySW5mbyk7XG4gICAgICAgIHBvcHVwRWRpdFByb2ZpbGUuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgcG9wdXBCdXR0b25TdWJtaXQsIFwi0KHQvtGF0YDQsNC90LjRgtGMXCIpO1xuICAgICAgfSk7XG4gIH0sXG59KTtcblxuY29uc3QgcG9wdXBTZXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX3NldC1hdmF0YXJcIiwge1xuICBoYW5kbGVGb3JtU3VibWl0OiAoZm9ybVZhbHVlLCBwb3B1cEJ1dHRvblN1Ym1pdCkgPT4ge1xuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgcG9wdXBCdXR0b25TdWJtaXQsIHBvcHVwQnV0dG9uU3VibWl0LnRleHRDb250ZW50KTtcbiAgICBteVBhZ2VBcGlcbiAgICAgIC5zZXRVc2VyQXZhdGFyKGZvcm1WYWx1ZSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcHJvZmlsZUluZm8uc2V0VXNlckF2YXRhcihyZXMpO1xuICAgICAgICBwb3B1cFNldEF2YXRhci5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBwb3B1cEJ1dHRvblN1Ym1pdCwgXCLQodC+0YXRgNCw0L3QuNGC0YxcIik7XG4gICAgICB9KTtcbiAgfSxcbn0pO1xuXG5jb25zdCBwb3B1cERlbGV0ZUNhcmQgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFwiLnBvcHVwX3R5cGVfY29uZmlybVwiLCB7XG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChlbGVtZW50LCBpZCkgPT4ge1xuICAgIG15UGFnZUFwaS5kZWxldGVDYXJkKGlkKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICBlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICB9KTtcbiAgICB9LFxufSk7XG5cbmZ1bmN0aW9uIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBidXR0b25TdWJtaXQsIGJ1dHRvblN1Ym1pdFRleHQpIHtcbiAgaWYgKGlzTG9hZGluZykge1xuICAgIGJ1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIjtcbiAgfSBlbHNlIHtcbiAgICBidXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSBidXR0b25TdWJtaXRUZXh0O1xuICB9XG59XG5cblByb21pc2UuYWxsKFtteVBhZ2VBcGkuZ2V0VXNlckluZm8oKSwgbXlQYWdlQXBpLmdldEluaXRpYWxDYXJkcygpXSlcbiAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgY29uc3QgWyB1c2VySW5mbywgaW5pdGlhbENhcmRzIF0gPSBkYXRhO1xuICAgICAgICBvd25lcklkID0gdXNlckluZm8uX2lkO1xuXG4gICAgICAgIHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKHVzZXJJbmZvKTtcbiAgICAgICAgcHJvZmlsZUluZm8uc2V0VXNlckF2YXRhcih1c2VySW5mbyk7XG5cbiAgICAgICAgY2FyZExpc3QucmVuZGVySXRlbShpbml0aWFsQ2FyZHMpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcblxuYnV0dG9uRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gcHJvZmlsZUluZm8uZ2V0VXNlckluZm8oKTtcblxuICBpbnB1dFR5cGVOYW1lLnZhbHVlID0gbmFtZTtcbiAgaW5wdXRUeXBlRGVzY3JpcHRpb24udmFsdWUgPSBhYm91dDtcblxuICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKTtcblxuICBmb3JtUHJvZmlsZUluZm9WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuYnV0dG9uTmV3Q2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cE5ld0NhcmQub3BlbigpO1xuXG4gIGZvcm1OZXdDYXJkVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbmJ1dHRvbkF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cFNldEF2YXRhci5vcGVuKCk7XG5cbiAgZm9ybVNldEF2YXRhclZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBOZXdDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cERlbGV0ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwU2V0QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZvcm1OZXdDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmZvcm1Qcm9maWxlSW5mb1ZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5mb3JtU2V0QXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHsgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBvcGVuKGNhcmRFbGVtZW50LCBjYXJkSWQpIHtcbiAgICBzdXBlci5vcGVuKCk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGNhcmRFbGVtZW50O1xuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmRJZDtcbiAgfVxuXG4gIF9oYW5kbGVTdWJtaXQgPSAoZXZ0KSA9PiB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2NhcmRFbGVtZW50LCB0aGlzLl9jYXJkSWQpO1xuXG4gICAgdGhpcy5jbG9zZSgpO1xuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjb25maWdWYWxpZGF0aW9uIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJidXR0b25FZGl0UHJvZmlsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJ1dHRvbk5ld0NhcmQiLCJmb3JtUHJvZmlsZSIsImZvcm1OZXdDYXJkIiwiaW5wdXRUeXBlTmFtZSIsImlucHV0VHlwZURlc2NyaXB0aW9uIiwiZm9ybVNldEF2YXRhciIsImJ1dHRvbkF2YXRhciIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJ1c2VySWQiLCJsaW5rIiwibmFtZSIsImxpa2VzIiwib3duZXIiLCJfaWQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVUcmFzaENsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwidGhpcyIsIl9pbWFnZSIsIl90aXRsZSIsIl9saWtlc0FycmF5IiwiX2xpa2VzQW1vdW50IiwibGVuZ3RoIiwiX2NhcmRPd25lcklkIiwiX2NhcmRJZCIsIl9jYXJkU2VsZWN0b3IiLCJfb3BlblBvcHVwWm9vbVBob3RvIiwiX29wZW5Qb3B1cFdpdGhDb25maXJtYXRpb24iLCJfaGFuZGxlTGlrZUNsaWNrIiwiX3VzZXJJZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9saWtlQnV0dG9uIiwiX2NhcmRJbWFnZSIsIl9jYXJkVGl0bGUiLCJfY2FyZFJlbW92ZXIiLCJfbGlrZU51bWJlciIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9pc0NhcmRMaWtlZCIsImxpa2VDYXJkIiwiZGlzbGlrZUNhcmQiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9kZWxldGVDYXJkUmVtb3ZlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tDYXJkT3duZXIiLCJzb21lIiwidXNlciIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsImNvbnRhaW5zIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zZXRFdmVudExpc3RlbmVyIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9pc1ZhbGlkIiwiX3RvZ2dsZUJ1dHRvblN1Ym1pdCIsIl9oaWRlSW5wdXRFcnJvciIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVycm9yIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZHNMaXN0IiwiaXRlbSIsIl9yZW5kZXJlZEVsZW1lbnQiLCJhcHBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJldnQiLCJrZXkiLCJjbG9zZSIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltYWdlIiwiX3BvcHVwVGl0bGUiLCJpbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwicHJldmVudERlZmF1bHQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9wb3B1cEJ1dHRvblN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsIl9oYW5kbGVTdWJtaXQiLCJVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckRlc2NyaXB0aW9uIiwidXNlckF2YXRhciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlRGVzY3JpcHRpb24iLCJfcHJvZmlsZUF2YXRhciIsImFib3V0IiwiYXZhdGFyIiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfcHJvZmlsZVVybCIsIl9oZWFkZXJzIiwiX2NhcmRzVXJsIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwiX2NoZWNrUmVzcG9uc2VTdGF0dXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwidXNlckluZm9PYmoiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmREYXRhT2JqIiwidXJsT2JqIiwib3duZXJJZCIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsIl9jYXJkRWxlbWVudCIsImNhcmRFbGVtZW50IiwiY2FyZElkIiwiZm9ybU5ld0NhcmRWYWxpZGF0b3IiLCJmb3JtUHJvZmlsZUluZm9WYWxpZGF0b3IiLCJmb3JtU2V0QXZhdGFyVmFsaWRhdG9yIiwicHJvZmlsZUluZm8iLCJteVBhZ2VBcGkiLCJhdXRob3JpemF0aW9uIiwiY2FyZExpc3QiLCJjcmVhdGVDYXJkIiwibmV3Q2FyZCIsInBvcHVwV2l0aEltYWdlIiwib3BlbiIsInBvcHVwRGVsZXRlQ2FyZCIsImNhcmRMaWtlTnVtYmVyIiwiaGFzQnV0dG9uQWRkaXRpb25hbENsYXNzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJnZW5lcmF0ZUVsZW1lbnQiLCJwb3B1cE5ld0NhcmQiLCJmb3JtVmFsdWVzIiwicG9wdXBCdXR0b25TdWJtaXQiLCJyZW5kZXJMb2FkaW5nIiwiYWRkTmV3Q2FyZCIsImFkZEl0ZW0iLCJmaW5hbGx5IiwicG9wdXBFZGl0UHJvZmlsZSIsInNldFVzZXJJbmZvIiwidXNlckluZm8iLCJwb3B1cFNldEF2YXRhciIsImZvcm1WYWx1ZSIsInNldFVzZXJBdmF0YXIiLCJkZWxldGVDYXJkIiwiaXNMb2FkaW5nIiwiYnV0dG9uU3VibWl0IiwiYnV0dG9uU3VibWl0VGV4dCIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiZGF0YSIsImluaXRpYWxDYXJkcyIsInJlbmRlckl0ZW0iLCJyZXNldFZhbGlkYXRpb24iLCJzZXRFdmVudExpc3RlbmVycyIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9