(()=>{"use strict";var e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button-submit",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},t=document.querySelector(".profile__button-edit-info"),n=document.querySelector(".profile__button-add-picture"),r=document.querySelector(".popup__form_type_edit-profile"),o=document.querySelector(".popup__form_type_add-card"),i=document.querySelector(".popup__input_type_name"),u=document.querySelector(".popup__input_type_description"),a=document.querySelector(".popup__form_type_set-avatar"),c=document.querySelector(".profile__overlay-avatar");function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n,r){var o=t.link,i=t.name,u=t.likes,a=t.owner,c=t._id,s=r.handleCardClick,l=r.handleTrashClick,p=r.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._image=o,this._title=i,this._likesArray=u,this._likesAmount=u.length,this._cardOwnerId=a._id,this._cardId=c,this._cardSelector=n,this._openPopupZoomPhoto=s,this._openPopupWithConfirmation=l,this._handleLikeClick=p}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".cards__grid-item").cloneNode(!0)}},{key:"generateElement",value:function(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".cards__like-btn"),this._cardImage=this._element.querySelector(".cards__photo"),this._cardTitle=this._element.querySelector(".cards__title"),this._cardRemover=this._element.querySelector(".cards__trash"),this._likeNumber=this._element.querySelector(".cards__like-number"),this._setEventListeners(),this._isCardLiked()?this.likeCard():this.dislikeCard(),this._cardImage.src=this._image,this._cardImage.alt="Фотография: '".concat(this._title,"'"),this._cardTitle.textContent=this._title,this._likeNumber.textContent=this._likesAmount,this._element}},{key:"_checkCardOwner",value:function(){return"ba78031e0402196520c06f61"===this._cardOwnerId||(this._deleteCardRemover(),!1)}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._handleLikeClick(e._likeNumber,e._cardId)})),this._checkCardOwner()&&this._cardRemover.addEventListener("click",(function(){e._openPopupWithConfirmation(e._element,e._cardId)})),this._cardImage.addEventListener("click",(function(){e._openPopupZoomPhoto(e._image,e._title)}))}},{key:"_isCardLiked",value:function(){return this._likesArray.some((function(e){return"ba78031e0402196520c06f61"===e._id}))}},{key:"dislikeCard",value:function(){this._likeButton.classList.remove("cards__like-btn_active")}},{key:"likeCard",value:function(){this._likeButton.classList.add("cards__like-btn_active")}},{key:"_deleteCardRemover",value:function(){this._cardRemover.remove()}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._setEventListener()}},{key:"_setEventListener",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonSubmit()}))}))}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonSubmit(this._inputList,this._submitButton),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_toggleButtonSubmit",value:function(){this._hasInvalidInput()?(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass)):(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItem",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderedElement=e._renderer(t),e._container.append(e._renderedElement)}))}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_active"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_active"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup_active")||t.target.classList.contains("popup__button-close"))&&e.close()}))}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=k(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function S(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__photo"),t._popupTitle=t._popup.querySelector(".popup__title-zoom"),t}return t=u,(n=[{key:"open",value:function(e,t){b(g(u.prototype),"open",this).call(this),this._popupImage.src=e,this._popupImage.alt="Фотография: '".concat(e,"'"),this._popupTitle.textContent=t}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=j(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},P.apply(this,arguments)}function j(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}function L(e,t){return L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},L(e,t)}function I(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(r);if(o){var n=B(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function u(e,t){var n,r,o,a,c=t.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a=function(e){e.preventDefault(),n._handleFormSubmit(n._getInputValues(),n._popupButtonSubmit),n.close()},(o="_handleSubmit")in(r=R(n=i.call(this,e)))?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n._inputList=n._popup.querySelectorAll(".popup__input"),n._handleFormSubmit=c,n._popupForm=n._popup.querySelector(".popup__form"),n._popupButtonSubmit=n._popup.querySelector(".popup__button-submit"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"close",value:function(){P(B(u.prototype),"close",this).call(this),this._popupForm.reset()}},{key:"setEventListeners",value:function(){P(B(u.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",this._handleSubmit)}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t){var n=t.userName,r=t.userDescription,o=t.userAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(n),this._profileDescription=document.querySelector(r),this._profileAvatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._profileName.textContent=t,this._profileDescription.textContent=n}},{key:"setUserAvatar",value:function(e){var t=e.avatar;this._profileAvatar.src=t}},{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,about:this._profileDescription.textContent}}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileUrl=n,this._headers=r,this._cardsUrl="https://mesto.nomoreparties.co/v1/cohort36/cards"}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e=this;return fetch(this._profileUrl,{headers:this._headers}).then((function(t){return e._checkResponseStatus(t)}))}},{key:"_checkResponseStatus",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status)).catch((function(e){return console.error(e)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch(this._cardsUrl,{headers:this._headers}).then((function(t){return e._checkResponseStatus(t)}))}},{key:"setUserInfo",value:function(e){var t=this;return fetch(this._profileUrl,{headers:this._headers,method:"PATCH",body:JSON.stringify(e)}).then((function(e){return t._checkResponseStatus(e)}))}},{key:"addNewCard",value:function(e){var t=this;return fetch("https://mesto.nomoreparties.co/v1/cohort36/cards",{headers:this._headers,method:"POST",body:JSON.stringify(e)}).then((function(e){return t._checkResponseStatus(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("https://mesto.nomoreparties.co/v1/cohort36/cards/".concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return t._checkResponseStatus(e)}))}},{key:"likeCard",value:function(e,t){var n=this;return fetch("https://mesto.nomoreparties.co/v1/cohort36/cards/".concat(e,"/likes"),{headers:this._headers,method:t}).then((function(e){return n._checkResponseStatus(e)}))}},{key:"setUserAvatar",value:function(e){var t=this;return fetch("https://nomoreparties.co/v1/cohort36/users/me/avatar",{headers:this._headers,method:"PATCH",body:JSON.stringify(e)}).then((function(e){return t._checkResponseStatus(e)}))}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=F(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},N.apply(this,arguments)}function F(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}function z(e,t){return z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},z(e,t)}function J(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return H(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(r);if(o){var n=W(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return J(this,e)});function u(e,t){var n,r,o,a,c=t.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a=function(e){e.preventDefault(),n._handleFormSubmit(n._cardElement,n._cardId),n.close()},(o="_handleSubmit")in(r=H(n=i.call(this,e)))?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n._handleFormSubmit=c,n}return t=u,(n=[{key:"open",value:function(e,t){N(W(u.prototype),"open",this).call(this),this._cardElement=e,this._cardId=t}},{key:"setEventListeners",value:function(){N(W(u.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",this._handleSubmit)}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(y),M=new f(e,o),G=new f(e,r),K=new f(e,a),Q=new U({userName:".profile__name",userDescription:".profile__description",userAvatar:".profile__avatar"}),X=new A({baseUrl:"https://nomoreparties.co/v1/cohort36/users/me",headers:{authorization:"24bb909b-945c-4159-8387-3cc3e3137134","Content-Type":"application/json"}}),Y=Promise.resolve(X.getInitialCards().then((function(e){return new d({data:e,renderer:function(e){return $(e)}},".cards__grid-list")})));function $(e){var t=new l(e,".cards-template",{handleCardClick:function(e,t){ee.open(e,t)},handleTrashClick:function(e,t){oe.open(e,t)},handleLikeClick:function(e,n){X.getInitialCards().then((function(e){return e.find((function(e){return e._id===n}))})).then((function(n){n.likes.some((function(e){return"ba78031e0402196520c06f61"===e._id}))?X.likeCard(n._id,"DELETE").then((function(n){t.dislikeCard(),e.textContent=n.likes.length})):X.likeCard(n._id,"PUT").then((function(n){t.likeCard(),e.textContent=n.likes.length}))}))}});return t.generateElement()}var ee=new C(".popup_type_zoom-photo"),te=new T(".popup_type_add-card",{handleFormSubmit:function(e,t){ie(!0,t,t.textContent),X.addNewCard(e).then((function(e){var t=$({name:e.name,link:e.link,likes:e.likes,owner:e.owner,_id:e._id});Y.then((function(e){return e.addItem(t)}))})).finally((function(){ie(!1,t,"Создать")}))}}),ne=new T(".popup_type_edit-profile",{handleFormSubmit:function(e,t){ie(!0,t,t.textContent),X.setUserInfo(e).then((function(e){Q.setUserInfo(e)})).finally((function(){ie(!1,t,"Сохранить")}))}}),re=new T(".popup_type_set-avatar",{handleFormSubmit:function(e,t){ie(!0,t,t.textContent),X.setUserAvatar(e).then((function(e){Q.setUserAvatar(e)})).finally((function(){ie(!1,t,"Сохранить")}))}}),oe=new Z(".popup_type_confirm",{handleFormSubmit:function(e,t){X.deleteCard(t).then((function(){e.remove()}))}});function ie(e,t,n){t.textContent=e?"Сохранение...":n}t.addEventListener("click",(function(){var e=Q.getUserInfo(),t=e.name,n=e.about;i.value=t,u.value=n,ne.open(),G.resetValidation()})),n.addEventListener("click",(function(){te.open(),M.resetValidation()})),c.addEventListener("click",(function(){re.open(),K.resetValidation()})),X.getUserInfo().then((function(e){Q.setUserInfo(e),Q.setUserAvatar(e)})),Y.then((function(e){e.renderItem()})),ee.setEventListeners(),te.setEventListeners(),ne.setEventListeners(),oe.setEventListeners(),re.setEventListeners(),M.enableValidation(),G.enableValidation(),K.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxtQkFDckJ2QyxFQUF5QnVDLG1CQUN6QnRDLEVBQXVCc0Msb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNvbmZpZ1ZhbGlkYXRpb24gPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uLXN1Ym1pdFwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBidXR0b25FZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2J1dHRvbi1lZGl0LWluZm9cIlxuKTsgLy/QutC90L7Qv9C60LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xuZXhwb3J0IGNvbnN0IGJ1dHRvbk5ld0NhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19idXR0b24tYWRkLXBpY3R1cmVcIlxuKTsgLy8g0LrQvdC+0L/QutCwINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbmV4cG9ydCBjb25zdCBmb3JtUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19mb3JtX3R5cGVfZWRpdC1wcm9maWxlXCJcbik7IC8vINGE0L7RgNC80LAg0L/RgNC+0YTQuNC70Y9cbmV4cG9ydCBjb25zdCBmb3JtTmV3Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fdHlwZV9hZGQtY2FyZFwiKTsgLy8g0YTQvtGA0LzQsCDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcbmV4cG9ydCBjb25zdCBpbnB1dFR5cGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdHlwZV9uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0VHlwZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2lucHV0X3R5cGVfZGVzY3JpcHRpb25cIlxuKTtcbmV4cG9ydCBjb25zdCBmb3JtU2V0QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2Zvcm1fdHlwZV9zZXQtYXZhdGFyXCJcbik7XG5leHBvcnQgY29uc3QgYnV0dG9uQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19vdmVybGF5LWF2YXRhclwiKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICB7IGxpbmssIG5hbWUsIGxpa2VzLCBvd25lciwgX2lkIH0sXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIHsgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVUcmFzaENsaWNrLCBoYW5kbGVMaWtlQ2xpY2sgfVxuICApIHtcbiAgICB0aGlzLl9pbWFnZSA9IGxpbms7XG4gICAgdGhpcy5fdGl0bGUgPSBuYW1lO1xuICAgIHRoaXMuX2xpa2VzQXJyYXkgPSBsaWtlcztcbiAgICB0aGlzLl9saWtlc0Ftb3VudCA9IGxpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9jYXJkT3duZXJJZCA9IG93bmVyLl9pZDtcbiAgICB0aGlzLl9jYXJkSWQgPSBfaWQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX29wZW5Qb3B1cFpvb21QaG90byA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9vcGVuUG9wdXBXaXRoQ29uZmlybWF0aW9uID0gaGFuZGxlVHJhc2hDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19ncmlkLWl0ZW1cIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBnZW5lcmF0ZUVsZW1lbnQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlrZS1idG5cIik7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19waG90b1wiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRSZW1vdmVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX190cmFzaFwiKTtcbiAgICB0aGlzLl9saWtlTnVtYmVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saWtlLW51bWJlclwiKTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICBpZiAodGhpcy5faXNDYXJkTGlrZWQoKSkge1xuICAgICAgdGhpcy5saWtlQ2FyZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc2xpa2VDYXJkKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2ltYWdlO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSBg0KTQvtGC0L7Qs9GA0LDRhNC40Y86ICcke3RoaXMuX3RpdGxlfSdgO1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xuICAgIHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlc0Ftb3VudDtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgX2NoZWNrQ2FyZE93bmVyKCkge1xuICAgIGlmICh0aGlzLl9jYXJkT3duZXJJZCAhPT0gXCJiYTc4MDMxZTA0MDIxOTY1MjBjMDZmNjFcIikge1xuICAgICAgdGhpcy5fZGVsZXRlQ2FyZFJlbW92ZXIoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMuX2xpa2VOdW1iZXIsIHRoaXMuX2NhcmRJZCk7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5fY2hlY2tDYXJkT3duZXIoKSkge1xuICAgICAgdGhpcy5fY2FyZFJlbW92ZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fb3BlblBvcHVwV2l0aENvbmZpcm1hdGlvbih0aGlzLl9lbGVtZW50LCB0aGlzLl9jYXJkSWQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fb3BlblBvcHVwWm9vbVBob3RvKHRoaXMuX2ltYWdlLCB0aGlzLl90aXRsZSk7XG4gICAgfSk7XG4gIH1cblxuICBfaXNDYXJkTGlrZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzQXJyYXkuc29tZSgodXNlcikgPT4ge1xuICAgICAgcmV0dXJuIHVzZXIuX2lkID09PSBcImJhNzgwMzFlMDQwMjE5NjUyMGMwNmY2MVwiO1xuICAgIH0pO1xuICB9XG5cbiAgZGlzbGlrZUNhcmQoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZHNfX2xpa2UtYnRuX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIGxpa2VDYXJkKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRzX19saWtlLWJ0bl9hY3RpdmVcIik7XG4gIH1cblxuICBfZGVsZXRlQ2FyZFJlbW92ZXIoKSB7XG4gICAgdGhpcy5fY2FyZFJlbW92ZXIucmVtb3ZlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faXNWYWxpZChpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdWJtaXQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN1Ym1pdCh0aGlzLl9pbnB1dExpc3QsIHRoaXMuX3N1Ym1pdEJ1dHRvbik7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgX2lzVmFsaWQoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGlucHV0RXJyb3IgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcblxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgaW5wdXRFcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGlucHV0RXJyb3IudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgaW5wdXRFcnJvciA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBpbnB1dEVycm9yLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgaW5wdXRFcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3VibWl0KCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBkYXRhO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIHJlbmRlckl0ZW0oKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQodGhpcy5fcmVuZGVyZWRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfYWN0aXZlXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9hY3RpdmVcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfYWN0aXZlXCIpIHx8XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2J1dHRvbi1jbG9zZVwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3Bob3RvXCIpO1xuICAgIHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX190aXRsZS16b29tXCIpO1xuICB9XG5cbiAgb3BlbihpbWFnZSwgbmFtZSkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGltYWdlO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gYNCk0L7RgtC+0LPRgNCw0YTQuNGPOiAnJHtpbWFnZX0nYDtcbiAgICB0aGlzLl9wb3B1cFRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHsgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9wb3B1cEJ1dHRvblN1Ym1pdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5wb3B1cF9fYnV0dG9uLXN1Ym1pdFwiXG4gICAgKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcblxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9XG5cbiAgX2hhbmRsZVN1Ym1pdCA9IChldnQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSwgdGhpcy5fcG9wdXBCdXR0b25TdWJtaXQpO1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWUsIHVzZXJEZXNjcmlwdGlvbiwgdXNlckF2YXRhciB9KSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lKTtcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJEZXNjcmlwdGlvbik7XG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhcik7XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKHsgYXZhdGFyIH0pIHtcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyLnNyYyA9IGF2YXRhcjtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9wcm9maWxlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgICB0aGlzLl9jYXJkc1VybCA9IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydDM2L2NhcmRzXCI7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fcHJvZmlsZVVybCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2VTdGF0dXMocmVzKSk7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZVN0YXR1cyhyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKS5jYXRjaCgoZXJyKSA9PlxuICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fY2FyZHNVcmwsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlU3RhdHVzKHJlcykpO1xuICB9XG5cbiAgc2V0VXNlckluZm8odXNlckluZm9PYmopIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fcHJvZmlsZVVybCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXNlckluZm9PYmopLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZVN0YXR1cyhyZXMpKTtcbiAgfVxuXG4gIGFkZE5ld0NhcmQoY2FyZERhdGFPYmopIHtcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0MzYvY2FyZHNcIiwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjYXJkRGF0YU9iaiksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlU3RhdHVzKHJlcykpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChpZCkge1xuICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydDM2L2NhcmRzLyR7aWR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2VTdGF0dXMocmVzKSk7XG4gIH1cblxuICBsaWtlQ2FyZChpZCwgbWV0aG9kKSB7XG4gICAgcmV0dXJuIGZldGNoKFxuICAgICAgYGh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQzNi9jYXJkcy8ke2lkfS9saWtlc2AsXG4gICAgICB7XG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgfVxuICAgICkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlU3RhdHVzKHJlcykpO1xuICB9XG5cbiAgc2V0VXNlckF2YXRhcih1cmxPYmopIHtcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwczovL25vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0MzYvdXNlcnMvbWUvYXZhdGFyXCIsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVybE9iaiksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlU3RhdHVzKHJlcykpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB7IGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgb3BlbihjYXJkRWxlbWVudCwgY2FyZElkKSB7XG4gICAgc3VwZXIub3BlbigpO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBjYXJkRWxlbWVudDtcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkSWQ7XG4gIH1cblxuICBfaGFuZGxlU3VibWl0ID0gKGV2dCkgPT4ge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9jYXJkRWxlbWVudCwgdGhpcy5fY2FyZElkKTtcblxuICAgIHRoaXMuY2xvc2UoKTtcbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHtcbiAgY29uZmlnVmFsaWRhdGlvbixcbiAgYnV0dG9uRWRpdFByb2ZpbGUsXG4gIGZvcm1TZXRBdmF0YXIsXG4gIGZvcm1OZXdDYXJkLFxuICBidXR0b25OZXdDYXJkLFxuICBidXR0b25BdmF0YXIsXG4gIGZvcm1Qcm9maWxlLFxuICBpbnB1dFR5cGVEZXNjcmlwdGlvbixcbiAgaW5wdXRUeXBlTmFtZSxcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvblwiO1xuXG5jb25zdCBmb3JtTmV3Q2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZ1ZhbGlkYXRpb24sIGZvcm1OZXdDYXJkKTtcbmNvbnN0IGZvcm1Qcm9maWxlSW5mb1ZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICBjb25maWdWYWxpZGF0aW9uLFxuICBmb3JtUHJvZmlsZVxuKTtcbmNvbnN0IGZvcm1TZXRBdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgY29uZmlnVmFsaWRhdGlvbixcbiAgZm9ybVNldEF2YXRhclxuKTtcblxuY29uc3QgcHJvZmlsZUluZm8gPSBuZXcgVXNlckluZm8oe1xuICB1c2VyTmFtZTogXCIucHJvZmlsZV9fbmFtZVwiLFxuICB1c2VyRGVzY3JpcHRpb246IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIHVzZXJBdmF0YXI6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxufSk7XG5cbmNvbnN0IG15UGFnZUFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vbm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQzNi91c2Vycy9tZVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCIyNGJiOTA5Yi05NDVjLTQxNTktODM4Ny0zY2MzZTMxMzcxMzRcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG5jb25zdCBjYXJkTGlzdCA9IFByb21pc2UucmVzb2x2ZShcbiAgbXlQYWdlQXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKGRhdGEpID0+IHtcbiAgICBjb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICBkYXRhLFxuICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgICByZXR1cm4gY3JlYXRlQ2FyZChpdGVtKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBcIi5jYXJkc19fZ3JpZC1saXN0XCJcbiAgICApO1xuICAgIHJldHVybiBjYXJkTGlzdDtcbiAgfSlcbik7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoaXRlbSwgXCIuY2FyZHMtdGVtcGxhdGVcIiwge1xuICAgIGhhbmRsZUNhcmRDbGljazogKGltYWdlLCBuYW1lKSA9PiB7XG4gICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGltYWdlLCBuYW1lKTtcbiAgICB9LFxuICAgIGhhbmRsZVRyYXNoQ2xpY2s6IChjYXJkRWxlbWVudCwgY2FyZElkKSA9PiB7XG4gICAgICBwb3B1cERlbGV0ZUNhcmQub3BlbihjYXJkRWxlbWVudCwgY2FyZElkKTtcbiAgICB9LFxuICAgIGhhbmRsZUxpa2VDbGljazogKGNhcmRMaWtlTnVtYmVyLCBjYXJkSWQpID0+IHtcbiAgICAgIG15UGFnZUFwaVxuICAgICAgICAuZ2V0SW5pdGlhbENhcmRzKClcbiAgICAgICAgLnRoZW4oKGNhcmRzQXJyYXkpID0+IHtcbiAgICAgICAgICByZXR1cm4gY2FyZHNBcnJheS5maW5kKChjYXJkKSA9PiBjYXJkLl9pZCA9PT0gY2FyZElkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKGNhcmQpID0+IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjYXJkLmxpa2VzLnNvbWUoKHVzZXIpID0+IHVzZXIuX2lkID09PSBcImJhNzgwMzFlMDQwMjE5NjUyMGMwNmY2MVwiKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgbXlQYWdlQXBpLmxpa2VDYXJkKGNhcmQuX2lkLCBcIkRFTEVURVwiKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgbmV3Q2FyZC5kaXNsaWtlQ2FyZCgpO1xuICAgICAgICAgICAgICBjYXJkTGlrZU51bWJlci50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbXlQYWdlQXBpLmxpa2VDYXJkKGNhcmQuX2lkLCBcIlBVVFwiKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgbmV3Q2FyZC5saWtlQ2FyZCgpO1xuICAgICAgICAgICAgICBjYXJkTGlrZU51bWJlci50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gIH0pO1xuICByZXR1cm4gbmV3Q2FyZC5nZW5lcmF0ZUVsZW1lbnQoKTtcbn1cblxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV96b29tLXBob3RvXCIpO1xuXG5jb25zdCBwb3B1cE5ld0NhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIsIHtcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1WYWx1ZXMsIHBvcHVwQnV0dG9uU3VibWl0KSA9PiB7XG4gICAgcmVuZGVyTG9hZGluZyh0cnVlLCBwb3B1cEJ1dHRvblN1Ym1pdCwgcG9wdXBCdXR0b25TdWJtaXQudGV4dENvbnRlbnQpO1xuICAgIG15UGFnZUFwaVxuICAgICAgLmFkZE5ld0NhcmQoZm9ybVZhbHVlcylcbiAgICAgIC50aGVuKCh7IG5hbWUsIGxpbmssIGxpa2VzLCBvd25lciwgX2lkIH0pID0+IHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHsgbmFtZSwgbGluaywgbGlrZXMsIG93bmVyLCBfaWQgfSk7XG4gICAgICAgIGNhcmRMaXN0LnRoZW4oKGNhcmRMaXN0KSA9PiBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KSk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBwb3B1cEJ1dHRvblN1Ym1pdCwgXCLQodC+0LfQtNCw0YLRjFwiKTtcbiAgICAgIH0pO1xuICB9LFxufSk7XG5cbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZVwiLCB7XG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChmb3JtVmFsdWVzLCBwb3B1cEJ1dHRvblN1Ym1pdCkgPT4ge1xuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgcG9wdXBCdXR0b25TdWJtaXQsIHBvcHVwQnV0dG9uU3VibWl0LnRleHRDb250ZW50KTtcbiAgICBteVBhZ2VBcGlcbiAgICAgIC5zZXRVc2VySW5mbyhmb3JtVmFsdWVzKVxuICAgICAgLnRoZW4oKHVzZXJJbmZvKSA9PiB7XG4gICAgICAgIHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKHVzZXJJbmZvKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIHBvcHVwQnV0dG9uU3VibWl0LCBcItCh0L7RhdGA0LDQvdC40YLRjFwiKTtcbiAgICAgIH0pO1xuICB9LFxufSk7XG5cbmNvbnN0IHBvcHVwU2V0QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9zZXQtYXZhdGFyXCIsIHtcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1WYWx1ZSwgcG9wdXBCdXR0b25TdWJtaXQpID0+IHtcbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIHBvcHVwQnV0dG9uU3VibWl0LCBwb3B1cEJ1dHRvblN1Ym1pdC50ZXh0Q29udGVudCk7XG4gICAgbXlQYWdlQXBpXG4gICAgICAuc2V0VXNlckF2YXRhcihmb3JtVmFsdWUpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHByb2ZpbGVJbmZvLnNldFVzZXJBdmF0YXIocmVzKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIHBvcHVwQnV0dG9uU3VibWl0LCBcItCh0L7RhdGA0LDQvdC40YLRjFwiKTtcbiAgICAgIH0pO1xuICB9LFxufSk7XG5cbmNvbnN0IHBvcHVwRGVsZXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXCIucG9wdXBfdHlwZV9jb25maXJtXCIsIHtcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGVsZW1lbnQsIGlkKSA9PiB7XG4gICAgbXlQYWdlQXBpLmRlbGV0ZUNhcmQoaWQpLnRoZW4oKCkgPT4ge1xuICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICB9KTtcbiAgfSxcbn0pO1xuXG5mdW5jdGlvbiByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgYnV0dG9uU3VibWl0LCBidXR0b25TdWJtaXRUZXh0KSB7XG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICBidXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCI7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uU3VibWl0LnRleHRDb250ZW50ID0gYnV0dG9uU3VibWl0VGV4dDtcbiAgfVxufVxuXG5idXR0b25FZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCB7IG5hbWUsIGFib3V0IH0gPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xuXG4gIGlucHV0VHlwZU5hbWUudmFsdWUgPSBuYW1lO1xuICBpbnB1dFR5cGVEZXNjcmlwdGlvbi52YWx1ZSA9IGFib3V0O1xuXG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xuXG4gIGZvcm1Qcm9maWxlSW5mb1ZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5idXR0b25OZXdDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwTmV3Q2FyZC5vcGVuKCk7XG5cbiAgZm9ybU5ld0NhcmRWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuYnV0dG9uQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwU2V0QXZhdGFyLm9wZW4oKTtcblxuICBmb3JtU2V0QXZhdGFyVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbm15UGFnZUFwaS5nZXRVc2VySW5mbygpLnRoZW4oKGRhdGEpID0+IHtcbiAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gIHByb2ZpbGVJbmZvLnNldFVzZXJBdmF0YXIoZGF0YSk7XG59KTtcblxuY2FyZExpc3QudGhlbigocmVzKSA9PiB7XG4gIHJlcy5yZW5kZXJJdGVtKCk7XG59KTtcblxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwTmV3Q2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBEZWxldGVDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFNldEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mb3JtTmV3Q2FyZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5mb3JtUHJvZmlsZUluZm9WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuZm9ybVNldEF2YXRhclZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4iXSwibmFtZXMiOlsiY29uZmlnVmFsaWRhdGlvbiIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiYnV0dG9uRWRpdFByb2ZpbGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJidXR0b25OZXdDYXJkIiwiZm9ybVByb2ZpbGUiLCJmb3JtTmV3Q2FyZCIsImlucHV0VHlwZU5hbWUiLCJpbnB1dFR5cGVEZXNjcmlwdGlvbiIsImZvcm1TZXRBdmF0YXIiLCJidXR0b25BdmF0YXIiLCJDYXJkIiwiY2FyZFNlbGVjdG9yIiwibGluayIsIm5hbWUiLCJsaWtlcyIsIm93bmVyIiwiX2lkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlVHJhc2hDbGljayIsImhhbmRsZUxpa2VDbGljayIsInRoaXMiLCJfaW1hZ2UiLCJfdGl0bGUiLCJfbGlrZXNBcnJheSIsIl9saWtlc0Ftb3VudCIsImxlbmd0aCIsIl9jYXJkT3duZXJJZCIsIl9jYXJkSWQiLCJfY2FyZFNlbGVjdG9yIiwiX29wZW5Qb3B1cFpvb21QaG90byIsIl9vcGVuUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiX2hhbmRsZUxpa2VDbGljayIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9saWtlQnV0dG9uIiwiX2NhcmRJbWFnZSIsIl9jYXJkVGl0bGUiLCJfY2FyZFJlbW92ZXIiLCJfbGlrZU51bWJlciIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9pc0NhcmRMaWtlZCIsImxpa2VDYXJkIiwiZGlzbGlrZUNhcmQiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9kZWxldGVDYXJkUmVtb3ZlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tDYXJkT3duZXIiLCJzb21lIiwidXNlciIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJfc2V0RXZlbnRMaXN0ZW5lciIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfaXNWYWxpZCIsIl90b2dnbGVCdXR0b25TdWJtaXQiLCJfaGlkZUlucHV0RXJyb3IiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFcnJvciIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJkYXRhIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsIml0ZW0iLCJfcmVuZGVyZWRFbGVtZW50IiwiYXBwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltYWdlIiwiX3BvcHVwVGl0bGUiLCJpbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwicHJldmVudERlZmF1bHQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9wb3B1cEJ1dHRvblN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsIl9oYW5kbGVTdWJtaXQiLCJVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckRlc2NyaXB0aW9uIiwidXNlckF2YXRhciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlRGVzY3JpcHRpb24iLCJfcHJvZmlsZUF2YXRhciIsImFib3V0IiwiYXZhdGFyIiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfcHJvZmlsZVVybCIsIl9oZWFkZXJzIiwiX2NhcmRzVXJsIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwiX2NoZWNrUmVzcG9uc2VTdGF0dXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJ1c2VySW5mb09iaiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZERhdGFPYmoiLCJ1cmxPYmoiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJfY2FyZEVsZW1lbnQiLCJjYXJkRWxlbWVudCIsImNhcmRJZCIsImZvcm1OZXdDYXJkVmFsaWRhdG9yIiwiZm9ybVByb2ZpbGVJbmZvVmFsaWRhdG9yIiwiZm9ybVNldEF2YXRhclZhbGlkYXRvciIsInByb2ZpbGVJbmZvIiwibXlQYWdlQXBpIiwiYXV0aG9yaXphdGlvbiIsImNhcmRMaXN0IiwicmVzb2x2ZSIsImdldEluaXRpYWxDYXJkcyIsImNyZWF0ZUNhcmQiLCJuZXdDYXJkIiwicG9wdXBXaXRoSW1hZ2UiLCJvcGVuIiwicG9wdXBEZWxldGVDYXJkIiwiY2FyZExpa2VOdW1iZXIiLCJjYXJkc0FycmF5IiwiZmluZCIsImNhcmQiLCJnZW5lcmF0ZUVsZW1lbnQiLCJwb3B1cE5ld0NhcmQiLCJmb3JtVmFsdWVzIiwicG9wdXBCdXR0b25TdWJtaXQiLCJyZW5kZXJMb2FkaW5nIiwiYWRkTmV3Q2FyZCIsImFkZEl0ZW0iLCJmaW5hbGx5IiwicG9wdXBFZGl0UHJvZmlsZSIsInNldFVzZXJJbmZvIiwidXNlckluZm8iLCJwb3B1cFNldEF2YXRhciIsImZvcm1WYWx1ZSIsInNldFVzZXJBdmF0YXIiLCJkZWxldGVDYXJkIiwiaXNMb2FkaW5nIiwiYnV0dG9uU3VibWl0IiwiYnV0dG9uU3VibWl0VGV4dCIsImdldFVzZXJJbmZvIiwicmVzZXRWYWxpZGF0aW9uIiwicmVuZGVySXRlbSIsInNldEV2ZW50TGlzdGVuZXJzIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=